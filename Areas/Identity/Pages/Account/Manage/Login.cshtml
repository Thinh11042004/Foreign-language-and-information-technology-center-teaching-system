@using Hệ_thống_dạy_học_trung_tâm_ngoại_ngữ_và_tin_học.Models.ViewModel.Account
@model LoginViewModel
@{
    ViewData["Title"] = "Log in";
    Layout = "_AuthLayout";
}

<div class="auth-container">
    <div class="auth-card">
        <div class="auth-header text-center mb-4">
            <div class="auth-logo mb-3">
                <i class="fas fa-graduation-cap fa-3x text-primary"></i>
            </div>
            <h2 class="fw-bold">Welcome Back</h2>
            <p class="text-muted">Sign in to your account</p>
        </div>

        <form id="loginForm" method="post">
            <div asp-validation-summary="ModelOnly" class="alert alert-danger" role="alert"></div>

            <div class="mb-3">
                <label asp-for="Email" class="form-label">Email Address</label>
                <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                    <input asp-for="Email" class="form-control" placeholder="Enter your email" autocomplete="username" />
                </div>
                <span asp-validation-for="Email" class="text-danger small"></span>
            </div>

            <div class="mb-3">
                <label asp-for="Password" class="form-label">Password</label>
                <div class="input-group">
                    <span class="input-group-text"><i class="fas fa-lock"></i></span>
                    <input asp-for="Password" class="form-control" placeholder="Enter your password" autocomplete="current-password" />
                    <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
                <span asp-validation-for="Password" class="text-danger small"></span>
            </div>

            <div class="mb-3">
                <div class="form-check">
                    <input class="form-check-input" asp-for="RememberMe" />
                    <label class="form-check-label" asp-for="RememberMe">
                        Remember me
                    </label>
                </div>
            </div>

            <div class="d-grid mb-3">
                <button id="loginButton" type="submit" class="btn btn-primary btn-lg">
                    <span class="login-text">
                        <i class="fas fa-sign-in-alt me-2"></i>Sign In
                    </span>
                    <span class="login-spinner d-none">
                        <span class="spinner-border spinner-border-sm me-2" role="status"></span>
                        Signing in...
                    </span>
                </button>
            </div>

            <div class="text-center mb-3">
                <a asp-action="ForgotPassword" class="text-decoration-none">
                    <i class="fas fa-key me-1"></i>Forgot your password?
                </a>
            </div>

            <hr class="my-4">

            <div class="text-center">
                <p class="mb-2">Don't have an account?</p>
                <a asp-action="Register" asp-route-returnUrl="@ViewData["ReturnUrl"]" class="btn btn-outline-primary">
                    <i class="fas fa-user-plus me-2"></i>Create Account
                </a>
            </div>
        </form>
    </div>

    <!-- Features sidebar -->
    <div class="auth-features d-none d-lg-block">
        <h4 class="text-white mb-4">Why Choose Our Platform?</h4>
        <div class="feature-list">
            <div class="feature-item mb-3">
                <i class="fas fa-chalkboard-teacher text-warning me-3"></i>
                <div>
                    <h6 class="text-white mb-1">Expert Instructors</h6>
                    <small class="text-light opacity-75">Learn from industry professionals</small>
                </div>
            </div>
            <div class="feature-item mb-3">
                <i class="fas fa-certificate text-success me-3"></i>
                <div>
                    <h6 class="text-white mb-1">Certified Courses</h6>
                    <small class="text-light opacity-75">Industry-recognized credentials</small>
                </div>
            </div>
            <div class="feature-item mb-3">
                <i class="fas fa-clock text-info me-3"></i>
                <div>
                    <h6 class="text-white mb-1">Flexible Learning</h6>
                    <small class="text-light opacity-75">Study at your own pace</small>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        $(document).ready(function() {
            // Password toggle
            $('#togglePassword').click(function() {
                var passwordField = $('#Password');
                var passwordFieldType = passwordField.attr('type');

                if (passwordFieldType === 'password') {
                    passwordField.attr('type', 'text');
                    $(this).find('i').removeClass('fa-eye').addClass('fa-eye-slash');
                } else {
                    passwordField.attr('type', 'password');
                    $(this).find('i').removeClass('fa-eye-slash').addClass('fa-eye');
                }
            });

            // Form submission with loading state
            $('#loginForm').submit(function() {
                var $button = $('#loginButton');
                $button.prop('disabled', true);
                $button.find('.login-text').addClass('d-none');
                $button.find('.login-spinner').removeClass('d-none');
            });

            // Focus on email field
            $('#Email').focus();
        });
    </script>
}